# File: start.yml
parameters:
- name: buildSteps # the name of the parameter is buildSteps
  type: stepList # data type is StepList
  default: [] # default value of buildSteps
# stages:
# - stage: secure_buildstage
#   pool:
#     vmImage: windows-latest
jobs:
- job: secure_buildjob
  steps:
  # - script: echo This happens before code 
  #   displayName: 'Base: Pre-build'
  # - script: echo Building
  #   displayName: 'Base: Build'

  # - ${{ each step in parameters.buildSteps }}:
  #   - ${{ each pair in step }}:
  #       ${{ if ne(pair.value, 'CmdLine@@2') }}:
  #         ${{ pair.key }}: ${{ pair.value }}       
  #       ${{ if eq(pair.value, 'CmdLine@@2') }}: 
  #         '${{ pair.value }}': error         

  - ${{ each step in parameters.buildSteps }}:
    - ${{ each pair in step }}:
        # ${{ if ne(pair.key, 'script') }}:
        #   ${{ pair.key }}: ${{ pair.value }}
        # ${{ elseif ne(pair.value, 'CmdLine@2') }}:
        #   ${{ pair.key }}: ${{ pair.value }}       
        ${{ if ne(pair.value, 'CmdLine@2') }}:
          ${{ pair.key }}: ${{ pair.value }}       
        ${{ elseif ne(pair.key, 'script') }}:
          ${{ pair.key }}: ${{ pair.value }}
        ${{ else }}:
          '${{ pair.value }}': error         

  # - script: echo This happens after code
  #   displayName: 'Base: Signing'