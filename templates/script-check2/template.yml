# template.yml
parameters:
- name: usersteps
  type: stepList
  default: []
steps:
- ${{ each step in parameters.usersteps }}:
  - ${{ if ne(step.task, 'CmdLine@2') }}:  
    - ${{ step }}
  - ${{ else }}:  
    - ${{ each pair in step }}:
        ${{ if eq(pair.key, 'inputs') }}:
          inputs:
            displayName: Disabled1
            ${{ each attribute in pair.value }}:
              ${{ if eq(attribute.key, 'script') }}:
                script: echo "Script removed by template"
              ${{ elseif eq(attribute.key, 'displayName') }}:
                displayName: Disabled1
              ${{ else }}:
                ${{ attribute.key }}: ${{ attribute.value }}
        ${{ elseif eq(pair.key, 'displayName') }}:
          displayName: Disabled2
        ${{ else }}:
          ${{ pair.key }}: ${{ pair.value }}
        # ${{ if not(containsValue(step.*.key, 'displayName')) }}:
        #   displayName: Disabled3

