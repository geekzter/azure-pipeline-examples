trigger: none
schedules:
- cron: '0 1 * * *'
  displayName: 'Nightly build (UTC)'
  always: 'true'
  branches:
    include:
    - main

jobs:
- job: 'azurepipelines'
  displayName: 'Azure Pipelines pool'
  pool:
    name: 'Azure Pipelines'
  steps:
  - pwsh: |
      Write-Output $PSVersionTable | Select-Object -Property OS, Platform | Format-List
- job: 'default'
  displayName: 'Default pool'
  pool:
    name: 'Default'
  steps:
  - pwsh: |
      Write-Output $PSVersionTable | Select-Object -Property OS, Platform | Format-List
- job: 'hosted'
  displayName: 'Hosted pool'
  pool:
    name: 'Hosted'
  steps:
  - pwsh: |
      Write-Output $PSVersionTable | Select-Object -Property OS, Platform | Set-Variable osProperties 
      if (Get-Command Get-ComputerInfo -ErrorAction SilentlyContinue) {
        $osProperties | Add-Member -MemberType NoteProperty -Name WindowsProductName -Value (Get-ComputerInfo | Select-Object -ExpandProperty WindowsProductName)
      }
      $osProperties | Format-List
- job: 'nopool'
  displayName: 'No pool specified'
  steps:
  - pwsh: |
      Write-Output $PSVersionTable | Select-Object -Property OS, Platform | Format-List